<!doctype html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Polaroid</title>
	<meta name="description" content="Create imaginative images through OpenAI." />

	<link rel="icon" href="./img/favicon.svg" type="image/svg+xml" />  

	<link rel="preload" href="./fonts/outfit-v11-latin-300.woff2" as="font" fetchpriority="high" crossorigin />
	<link rel="preload" href="./fonts/outfit-v11-latin-500.woff2" as="font" fetchpriority="high" crossorigin />
	<link rel="preload" href="./fonts/rock-salt-v18-latin-regular.woff2" as="font" fetchpriority="high" crossorigin />

	<link rel="stylesheet" href="./scss/index.scss" />
	<script type="module" src="./js/index.js"></script>
</head>

<body class="body">
	<header class="header">
		<a 
			class="header__logo"
			href="https://polaroid.robr.app"
			title="Logo"
		>
			<svg width="252.76" height="27.679" version="1.1" viewBox="0 0 66.875 7.3234" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-167.9 -5.753)"><g fill="#cc7750" stroke-width=".26458" aria-label="POLAR"><g transform="translate(139.71 -109.55)"><g stroke-width=".26458" aria-label="ID"><path d="m84.052 122.37v-6.7959h0.72108v6.7959z" fill="#bf0a00"/><path d="m89.602 122.37v-0.67169h1.9953q0.8001 0 1.4125-0.34572 0.61242-0.3556 0.95814-0.96802 0.34572-0.6223 0.34572-1.4224t-0.34572-1.4125q-0.34572-0.61243-0.95814-0.95815-0.61242-0.3556-1.4125-0.3556h-1.9756v-0.66181h1.9953q0.74083 0 1.3631 0.25682 0.63218 0.24695 1.0964 0.7112 0.47413 0.45438 0.73096 1.0767 0.25682 0.61242 0.25682 1.3533 0 0.72108-0.25682 1.3434-0.25682 0.6223-0.72108 1.0866-0.46426 0.45438-1.0964 0.7112-0.6223 0.25682-1.3533 0.25682zm-0.4445 0v-6.7959h0.72108v6.7959z" fill="#f0f0f0"/></g><g transform="matrix(.37555 0 0 .37555 72.294 114.46)" fill="#f0f0f0"><path d="m12 9.25c-2.0622 0-3.75 1.6878-3.75 3.75s1.6878 3.75 3.75 3.75c2.0622 0 3.75-1.6878 3.75-3.75s-1.6878-3.75-3.75-3.75zm0 1.5c1.2515 0 2.25 0.99848 2.25 2.25s-0.99848 2.25-2.25 2.25-2.25-0.99848-2.25-2.25 0.99848-2.25 2.25-2.25z" color="#000000" style="-inkscape-stroke:none"/><path d="m10.367 2.25c-1.3348 0-2.5041 0.93314-2.7695 2.2363-0.058599 0.28767-0.33229 0.52539-0.61914 0.52539h-0.033203c-1.4274 0.062414-2.489 0.23915-3.3809 0.82422-0.56705 0.372-1.0555 0.84977-1.4355 1.4082-0.93117 1.3683-0.87891 3.0549-0.87891 6.1191a0.75 0.75 0 0 0 0.75 0.75 0.75 0.75 0 0 0 0.75-0.75c0-3.0642 0.052274-4.4424 0.61914-5.2754 0.26847-0.39449 0.61405-0.73333 1.0176-0.99805 0.54879-0.36003 1.2911-0.52175 2.625-0.58008l-0.033203 0.00195c1.0308 0 1.89-0.7456 2.0898-1.7266 0.12217-0.59975 0.6571-1.0352 1.2988-1.0352h3.2656c0.64166 0 1.1766 0.43536 1.2988 1.0352 0.1998 0.98092 1.059 1.7266 2.0898 1.7266l-0.0332-0.00195c1.3339 0.058326 2.0761 0.22 2.625 0.58008 0.40348 0.26474 0.74907 0.60355 1.0176 0.99805 0.56685 0.83295 0.61914 2.2112 0.61914 5.2754 0 3.0643-0.05229 4.4425-0.61914 5.2754-0.26852 0.39446-0.61407 0.73326-1.0176 0.99805-0.85408 0.5603-2.2695 0.61328-5.3906 0.61328h-4.4453c-3.121 0-4.5365-0.052986-5.3906-0.61328-0.40356-0.26477-0.7491-0.6036-1.0176-0.99805-0.16013-0.23532-0.27784-0.49494-0.36914-0.83398a0.75 0.75 0 0 0-0.91797-0.5293 0.75 0.75 0 0 0-0.5293 0.91992c0.12656 0.46995 0.31318 0.90063 0.57617 1.2871 0.38004 0.55835 0.86852 1.0381 1.4355 1.4102 1.3879 0.9105 3.0919 0.85742 6.2129 0.85742h4.4453c3.1211 0 4.825 0.05308 6.2129-0.85742 0.56689-0.37201 1.0555-0.85182 1.4355-1.4102 0.93115-1.3683 0.87891-3.0548 0.87891-6.1191 0-3.0642 0.052241-4.7509-0.87891-6.1191-0.38009-0.55842-0.86862-1.0362-1.4355-1.4082-0.89186-0.58502-1.9534-0.7618-3.3809-0.82422h-0.03321c-0.28693 0-0.56054-0.23767-0.61914-0.52539-0.26556-1.3031-1.4348-2.2363-2.7695-2.2363z" color="#000000" stroke-linecap="round" style="-inkscape-stroke:none"/><path d="m18 9.25a0.75 0.75 0 0 0-0.75 0.75 0.75 0.75 0 0 0 0.75 0.75h1a0.75 0.75 0 0 0 0.75-0.75 0.75 0.75 0 0 0-0.75-0.75z" color="#000000" stroke-linecap="round" style="-inkscape-stroke:none"/></g><g fill="#f0f0f0"><path d="m28.654 119.64v-0.64206h2.0052q0.41487 0 0.74083-0.16792 0.33584-0.16792 0.52352-0.47413 0.19756-0.31609 0.19756-0.75071t-0.19756-0.74083q-0.18768-0.31609-0.52352-0.48402-0.32597-0.1778-0.74083-0.1778h-2.0052v-0.63217h2.0546q0.61242 0 1.0964 0.25682 0.48401 0.24694 0.76059 0.70132 0.28646 0.45438 0.28646 1.0767 0 0.61242-0.28646 1.0767-0.27658 0.45437-0.76059 0.71119-0.48401 0.24695-1.0964 0.24695zm-0.46426 2.7263v-6.7959h0.72108v6.7959z"/><path d="m39.903 122.47q-0.72108 0-1.3434-0.2667-0.61242-0.27658-1.0767-0.75071-0.46426-0.48401-0.73096-1.1162-0.25682-0.64205-0.25682-1.373 0-0.74083 0.25682-1.373 0.25682-0.63217 0.72108-1.1063 0.46426-0.47413 1.0767-0.74083t1.3335-0.2667 1.3335 0.2667q0.6223 0.2667 1.0866 0.74083 0.46426 0.47414 0.72108 1.1162 0.25682 0.63218 0.25682 1.373 0 0.73096-0.25682 1.373-0.25682 0.63218-0.72108 1.1063-0.45438 0.47413-1.0668 0.75071-0.61242 0.2667-1.3335 0.2667zm-0.01976-0.70132q0.77047 0 1.3631-0.36548 0.60254-0.36548 0.93839-0.99765 0.34572-0.63218 0.34572-1.4422 0-0.60254-0.19756-1.1063-0.19756-0.51364-0.55316-0.889-0.3556-0.38523-0.83961-0.59266-0.47413-0.20744-1.0569-0.20744-0.76059 0-1.3631 0.36548-0.59267 0.3556-0.93839 0.98778-0.33584 0.63218-0.33584 1.4422 0 0.60255 0.19756 1.1162 0.19756 0.51364 0.55316 0.89888 0.3556 0.37535 0.83961 0.58279 0.48401 0.20743 1.047 0.20743z"/><path d="m47.33 122.37v-6.7959h0.72108v6.7959zm0.47413 0v-0.66181h3.7437v0.66181z"/></g><path d="m54.944 122.37 2.7855-6.7959h0.54328l2.7559 6.7959h-0.78034l-2.4003-6.0057h0.28646l-2.4201 6.0057zm1.2742-1.7681v-0.64205h3.556v0.64205z" fill="#bf0a00"/><path d="m65.374 119.32v-0.61242h1.9756q0.67169 0 1.0273-0.33585 0.3556-0.34572 0.3556-0.91863 0-0.55315-0.3556-0.89888-0.3556-0.3556-1.0273-0.3556h-1.9756v-0.63217h1.9756q0.66181 0 1.1359 0.24694 0.47413 0.23707 0.72108 0.66181 0.25682 0.42475 0.25682 0.96802 0 0.56304-0.25682 0.98778-0.24694 0.42475-0.72108 0.66181-0.47413 0.22719-1.1359 0.22719zm-0.46426 3.0424v-6.7959h0.72108v6.7959zm4.1092 0-2.5485-3.1411 0.70132-0.22719 2.7757 3.3683z" fill="#f0f0f0"/></g></g></g></svg>
		</a>
	</header>

	<main 
		x-cloak
		x-data="polaroid"
		id="app"
		class="app"
	>
		<div class="polaroid">

			<div class="polaroid__tape polaroid__tape--top">
				<svg width="314" height="150" version="1.1" viewBox="0 0 83.079 39.687" xmlns="http://www.w3.org/2000/svg">
					<path d="m2.1167 0h79.375l-1.5875 2.7522 3.175 7.1199-3.175 8.9569 3.175 11.185-3.175 5.5126 1.5875 4.1605h-79.375l-1.0583-2.1063 2.1167-6.2234-1.0583-12.303-2.1167-9.4567 4.2333-5.408z" fill="#e9c6af" stroke-width=".26458"/>
				</svg>
			</div>

			<div class="polaroid__tape polaroid__tape--bottom">
				<svg width="314" height="150" version="1.1" viewBox="0 0 83.079 39.687" xmlns="http://www.w3.org/2000/svg">
					<path d="m2.1167 0h79.375l-1.5875 2.7522 3.175 7.1199-3.175 8.9569 3.175 11.185-3.175 5.5126 1.5875 4.1605h-79.375l-1.0583-2.1063 2.1167-6.2234-1.0583-12.303-2.1167-9.4567 4.2333-5.408z" fill="#e9c6af" stroke-width=".26458"/>
				</svg>
			</div>		

			<div 
				:class="{ 'has-image': states.imageVisible }"
				class="polaroid__frame"
			>
				<div 
					x-text="data.error"
					:class="{ 'is-visible': states.hasError }"
					class="polaroid__frame__error"
				></div>

				<button 
					:class="{ 'is-visible': states.imageVisible }"
					@click="handleCopyBtnClick"
					x-ref="btnCopy"
					class="polaroid__frame__copy" 
					type="button"
				>
					<svg class="icon icon--copy" width="256mm" height="256mm" version="1.1" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
						<g transform="matrix(8.8194 0 0 8.8194 15.04 21.621)" fill="none">
							<g transform="matrix(1.3188 0 0 1.3188 -3.0174 -3.7645)" fill="#fff" stroke-linecap="round">
								<path d="m18.115 1.2598c-1.2355 0.062621-2.4838 0.59729-3.4492 1.5664a0.75 0.75 0 0 0 2e-3 1.0605 0.75 0.75 0 0 0 1.0605-0.00195c1.4159-1.4213 3.5052-1.4974 4.6934-0.30469 1.1882 1.1927 1.1131 3.2994-0.30273 4.7207l-2.4238 2.4316a0.75 0.75 0 0 0 2e-3 1.0625 0.75 0.75 0 0 0 1.0605-0.0039l2.4237-2.4316c1.9307-1.9382 2.1266-5.007 0.30273-6.8379-0.91192-0.91543-2.1336-1.3243-3.3691-1.2617zm-5.6172 4.0527a0.75 0.75 0 0 0-0.5293 0.2207l-2.1504 2.1582c-1.9308 1.9382-2.1265 5.007-0.30273 6.8379a0.75 0.75 0 0 0 1.0605 2e-3 0.75 0.75 0 0 0 2e-3 -1.0605c-1.1882-1.1928-1.1132-3.2994 0.30269-4.7208l2.1504-2.1582a0.75 0.75 0 0 0-0.001953-1.0605 0.75 0.75 0 0 0-0.53125-0.21875z" color="#000000" style="-inkscape-stroke:none"/>
								<path d="m13.424 9.4688a0.75 0.75 0 0 0-2e-3 1.0605c1.1881 1.1927 1.1131 3.2993-0.30273 4.7207l-2.4238 2.4336-2.4238 2.4316c-1.4158 1.4213-3.5052 1.4974-4.6933 0.30469-1.1881-1.1927-1.1131-3.2993 0.30273-4.7207l2.4238-2.4336a0.75 0.75 0 0 0-0.00195-1.0605 0.75 0.75 0 0 0-1.0605 2e-3l-2.4238 2.4336c-1.9307 1.9382-2.1265 5.007-0.30273 6.8379 1.8238 1.8309 4.8876 1.6336 6.8184-0.30469l2.4238-2.4316 2.4238-2.4336c1.9307-1.9382 2.1266-5.007 0.30273-6.8379a0.75 0.75 0 0 0-1.0606-2e-3z" color="#000000" style="-inkscape-stroke:none"/>
							</g>
						</g>
					</svg>
				</button>
				
				<picture class="polaroid__picture">
					<img 
						x-show="data.image.url.length"
						x-ref="pictureImg"
						:src="data.image.url"
						:alt="data.image.alt"
						:class="{ 'is-developing': states.isDeveloping, 'is-developed': states.isDeveloped }"
						class="polaroid__picture__image"
						width="900"
						height="900"
					/>				
				</picture>
			</div>

			<div class="polaroid__prompt">
				<div
					x-ref="textarea"
					x-model="data.prompt"
					x-text="data.placeholderText"
					@input="handlePromptInput"
					@focus="handlePromptFocus"
					@blur="handlePromptBlur"
					:class="{ 'has-input': data.prompt.length }"
					class="polaroid__prompt__textarea"
					spellcheck="false"
					contenteditable="true"
				></div>
				<button 
					@click="submitPrompt"
					:class="{ 'is-submitting': states.isSubmitting, 'is-visible': states.canSubmit }"
					:disabled="!data.prompt.length"
					class="polaroid__prompt__btn"
					type="button"
				>
					<i class="icon icon-camera">
						<svg width="64" height="64" version="1.1" viewBox="0 0 16.933 16.933" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-5.1915 -5.6568)"><g transform="matrix(.78756 0 0 .78756 25.551 4.7975)" fill="#fff"><path d="m-15.101 9.099c-2.0622 0-3.75 1.6878-3.75 3.75s1.6878 3.75 3.75 3.75 3.75-1.6878 3.75-3.75-1.6878-3.75-3.75-3.75zm0 1.5c1.2515 0 2.25 0.99848 2.25 2.25s-0.99848 2.25-2.25 2.25-2.25-0.99848-2.25-2.25 0.99848-2.25 2.25-2.25z" color="#000000" /><path d="m-16.734 2.099c-1.3348 0-2.5041 0.93314-2.7695 2.2363-0.0586 0.28767-0.33229 0.52539-0.61914 0.52539h-0.03321c-1.4274 0.062414-2.489 0.23915-3.3809 0.82422-0.56705 0.372-1.0555 0.84977-1.4355 1.4082-0.93117 1.3683-0.87891 3.0549-0.87891 6.1191a0.75 0.75 0 0 0 0.75 0.75 0.75 0.75 0 0 0 0.75-0.75c0-3.0642 0.05227-4.4424 0.61914-5.2754 0.26847-0.39449 0.61405-0.73333 1.0176-0.99805 0.54879-0.36003 1.2911-0.52175 2.625-0.58008l-0.0332 0.00195c1.0308 0 1.89-0.7456 2.0898-1.7266 0.12217-0.59975 0.6571-1.0352 1.2988-1.0352h3.2656c0.64166 0 1.1766 0.43536 1.2988 1.0352 0.1998 0.98092 1.059 1.7266 2.0898 1.7266l-0.0332-0.00195c1.3339 0.058326 2.0761 0.22 2.625 0.58008 0.40348 0.26474 0.74907 0.60355 1.0176 0.99805 0.56685 0.83295 0.61914 2.2112 0.61914 5.2754 0 3.0643-0.05229 4.4425-0.61914 5.2754-0.26852 0.39446-0.61407 0.73326-1.0176 0.99805-0.85408 0.5603-2.2695 0.61328-5.3906 0.61328h-4.4453c-3.121 0-4.5365-0.05299-5.3906-0.61328-0.40356-0.26477-0.7491-0.6036-1.0176-0.99805-0.16013-0.23532-0.27784-0.49494-0.36914-0.83398a0.75 0.75 0 0 0-0.91797-0.5293 0.75 0.75 0 0 0-0.5293 0.91992c0.12656 0.46995 0.31318 0.90063 0.57617 1.2871 0.38004 0.55835 0.86852 1.0381 1.4355 1.4102 1.3879 0.9105 3.0919 0.85742 6.2129 0.85742h4.4453c3.1211 0 4.825 0.05308 6.2129-0.85742 0.56689-0.37201 1.0555-0.85182 1.4355-1.4102 0.93115-1.3683 0.87891-3.0548 0.87891-6.1191 0-3.0642 0.052241-4.7509-0.87891-6.1191-0.38008-0.55842-0.86862-1.0362-1.4355-1.4082-0.89186-0.58502-1.9534-0.7618-3.3809-0.82422h-0.03321c-0.28693 0-0.56054-0.23767-0.61914-0.52539-0.26556-1.3031-1.4348-2.2363-2.7695-2.2363h-1.5977z" color="#000000" stroke-linecap="round" /><path d="m-9.1014 9.099a0.75 0.75 0 0 0-0.75 0.75 0.75 0.75 0 0 0 0.75 0.75h1a0.75 0.75 0 0 0 0.75-0.75 0.75 0.75 0 0 0-0.75-0.75z" color="#000000" stroke-linecap="round" /></g></g></svg>
					</i>
				</button>
			</div>
		</div>
	</main>

	<div class="background">
		<canvas class="background__canvas"></canvas>
	</div>

</body>

</html>